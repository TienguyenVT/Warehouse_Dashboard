(this["webpackJsonpwarehouse-dashboard"]=this["webpackJsonpwarehouse-dashboard"]||[]).push([[0],{15:function(t,e,a){},24:function(t,e,a){},30:function(t,e,a){},31:function(t,e,a){},32:function(t,e,a){},33:function(t,e,a){},34:function(t,e,a){},35:function(t,e,a){},36:function(t,e,a){"use strict";a.r(e);var s=a(1),c=a.n(s),n=a(16),r=a.n(n),l=a(9),i=a(2),o=a(0);const d=Object(s.createContext)(null),h=t=>{let{children:e}=t;const[a,c]=Object(s.useState)(null),[n,r]=Object(s.useState)(!0);Object(s.useEffect)((()=>{const t=localStorage.getItem("user");t&&c(JSON.parse(t)),r(!1)}),[]);return Object(o.jsx)(d.Provider,{value:{user:a,login:async t=>{c(t),localStorage.setItem("user",JSON.stringify(t))},logout:()=>{c(null),localStorage.removeItem("user")},loading:n},children:e})},u=()=>{const t=Object(s.useContext)(d);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};var j=a(3),b=a(17);a(24);const m=["component"];var O=t=>{let{component:e}=t,a=Object(b.a)(t,m);const{user:s,loading:c}=u();return c?Object(o.jsxs)("div",{className:"loading-container",children:[Object(o.jsx)("div",{className:"loading-spinner"}),Object(o.jsx)("p",{children:"\u0110ang t\u1ea3i..."})]}):Object(o.jsx)(i.b,Object(j.a)(Object(j.a)({},a),{},{render:t=>s?Object(o.jsx)(e,Object(j.a)({},t)):Object(o.jsx)(i.a,{to:{pathname:"/login",state:{from:t.location}}})}))};a(30);var p=()=>{const[t,e]=Object(s.useState)(""),[a,c]=Object(s.useState)(""),[n,r]=Object(s.useState)(""),[l,d]=Object(s.useState)(!1),h=Object(i.g)(),j=Object(i.h)(),{login:b}=u();return Object(o.jsxs)("div",{className:"login-container",children:[Object(o.jsx)("h2",{children:"\u0110\u0103ng Nh\u1eadp H\u1ec7 Th\u1ed1ng"}),Object(o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),r(""),d(!0);try{if(!t||!a)throw new Error("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin");if("admin"!==t||"admin123"!==a)throw new Error("Th\xf4ng tin \u0111\u0103ng nh\u1eadp kh\xf4ng ch\xednh x\xe1c");{await b({username:t,role:"admin"});const{from:e}=j.state||{from:{pathname:"/dashboard"}};h.replace(e)}}catch(s){r(s.message)}finally{d(!1)}},children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"username",children:"T\xean \u0111\u0103ng nh\u1eadp:"}),Object(o.jsx)("input",{type:"text",id:"username",value:t,onChange:t=>e(t.target.value),disabled:l,required:!0,placeholder:"Nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"password",children:"M\u1eadt kh\u1ea9u:"}),Object(o.jsx)("input",{type:"password",id:"password",value:a,onChange:t=>c(t.target.value),disabled:l,required:!0,placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u"})]}),n&&Object(o.jsx)("div",{className:"error-message",children:n}),Object(o.jsx)("button",{type:"submit",disabled:l,children:l?"\u0110ang x\u1eed l\xfd...":"\u0110\u0103ng Nh\u1eadp"})]}),Object(o.jsxs)("div",{className:"login-note",children:[Object(o.jsx)("p",{children:"T\xe0i kho\u1ea3n m\u1eb7c \u0111\u1ecbnh: admin / admin123"}),Object(o.jsx)("p",{children:"L\u01b0u \xfd: Ch\u1ec9 d\xe0nh cho m\u1ee5c \u0111\xedch ki\u1ec3m th\u1eed"})]})]})};a(31),a(15);var g=t=>{let{tier:e,tray:a,status:s,onClick:c,isFiltered:n}=t;const r=(s||"empty").toLowerCase(),l={high:"K\u1ec7 ch\u1ee9a nhi\u1ec1u",medium:"K\u1ec7 ch\u1ee9a v\u1eeba ph\u1ea3i",empty:"K\u1ec7 tr\u1ed1ng"},i=void 0!==n?n?"filtered-in":"filtered-out":"";return Object(o.jsx)("div",{className:"shelf-item ".concat(r," ").concat(i),onClick:t=>{t.preventDefault(),t.stopPropagation(),c&&c()},onKeyPress:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),c&&c())},title:"T\u1ea7ng ".concat(e," - Khay ").concat(a," | ").concat(l[r]),tabIndex:0,role:"button","aria-label":"K\u1ec7 t\u1ea7ng ".concat(e," khay ").concat(a," tr\u1ea1ng th\xe1i ").concat(l[r]),style:{cursor:c?"pointer":"default"},children:Object(o.jsxs)("span",{className:"shelf-label",children:[e,"-",a]})})};a(32);var x=t=>{let{shelf:e,onClose:a}=t;const c=Object(s.useMemo)((()=>{if(!e)return 0;return(e.itemCount||0)/(e.capacity||1)*100}),[e]);if(!e)return null;const n="string"===typeof e.tier?parseInt(e.tier,10):e.tier;return Object(o.jsxs)("div",{className:"shelf-detail",role:"dialog","aria-labelledby":"shelf-detail-title",children:[Object(o.jsxs)("div",{className:"shelf-detail-header",children:[Object(o.jsx)("h3",{id:"shelf-detail-title",children:"Chi ti\u1ebft k\u1ec7 h\xe0ng"}),Object(o.jsx)("button",{onClick:a,className:"close-button","aria-label":"\u0110\xf3ng chi ti\u1ebft",children:"\xd7"})]}),Object(o.jsxs)("div",{className:"shelf-detail-content",children:[Object(o.jsxs)("div",{className:"detail-row",children:[Object(o.jsx)("span",{className:"label",children:"T\u1ea7ng:"}),Object(o.jsx)("span",{className:"value",children:n})]}),Object(o.jsxs)("div",{className:"detail-row",children:[Object(o.jsx)("span",{className:"label",children:"Khay:"}),Object(o.jsx)("span",{className:"value",children:e.tray})]}),Object(o.jsxs)("div",{className:"detail-row",children:[Object(o.jsx)("span",{className:"label",children:"S\u1ed1 l\u01b0\u1ee3ng:"}),Object(o.jsxs)("span",{className:"value",children:[e.itemCount||0," / ",e.capacity||0," (",c.toFixed(1),"%)"]})]}),Object(o.jsxs)("div",{className:"detail-row",children:[Object(o.jsx)("span",{className:"label",children:"Tr\u1ea1ng th\xe1i:"}),Object(o.jsx)("span",{className:"value status-".concat((e.status||"").toLowerCase()),children:(t=>{if(!t)return"";return{HIGH:"\u0110\u1ea7y",MEDIUM:"C\xf2n tr\u1ed1ng m\u1ed9t ph\u1ea7n",EMPTY:"Tr\u1ed1ng"}[t]||t})(e.status)})]}),e.lastUpdated&&Object(o.jsxs)("div",{className:"detail-row",children:[Object(o.jsx)("span",{className:"label",children:"C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i:"}),Object(o.jsx)("span",{className:"value",children:(t=>{if(!t)return"";try{const e=new Date(t);return isNaN(e.getTime())?"":new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).format(e)}catch(e){return console.error("L\u1ed7i khi \u0111\u1ecbnh d\u1ea1ng ng\xe0y:",e),""}})(e.lastUpdated)})]}),void 0!==e.capacity&&Object(o.jsxs)("div",{className:"detail-row",children:[Object(o.jsx)("span",{className:"label",children:"S\u1ee9c ch\u1ee9a:"}),Object(o.jsx)("span",{className:"value",children:e.capacity})]})]})]})};a(33);var f=t=>{let{stats:e={},lastUpdated:a}=t;const s={high:"number"===typeof e.high?e.high:0,medium:"number"===typeof e.medium?e.medium:0,empty:"number"===typeof e.empty?e.empty:0},c=s.high+s.medium+s.empty;return Object(o.jsxs)("div",{className:"status-bar",role:"status","aria-label":"Th\u1ed1ng k\xea tr\u1ea1ng th\xe1i k\u1ec7 h\xe0ng",children:[Object(o.jsxs)("div",{className:"status-bar-items",children:[Object(o.jsxs)("div",{className:"stat-item",title:"S\u1ed1 \xf4 \u0111ang ch\u1ee9a nhi\u1ec1u",children:[Object(o.jsxs)("div",{className:"stat-content",children:[Object(o.jsx)("span",{className:"dot high-dot","aria-label":"\xd4 ch\u1ee9a nhi\u1ec1u"}),Object(o.jsx)("span",{className:"stat-label",children:"HIGH:"}),Object(o.jsx)("span",{className:"stat-value",children:s.high})]}),Object(o.jsxs)("div",{className:"stat-percentage",children:[c?(s.high/c*100).toFixed(1):0,"%"]})]}),Object(o.jsxs)("div",{className:"stat-item",title:"S\u1ed1 \xf4 \u0111ang ch\u1ee9a v\u1eeba ph\u1ea3i",children:[Object(o.jsxs)("div",{className:"stat-content",children:[Object(o.jsx)("span",{className:"dot medium-dot","aria-label":"\xd4 ch\u1ee9a v\u1eeba ph\u1ea3i"}),Object(o.jsx)("span",{className:"stat-label",children:"MEDIUM:"}),Object(o.jsx)("span",{className:"stat-value",children:s.medium})]}),Object(o.jsxs)("div",{className:"stat-percentage",children:[c?(s.medium/c*100).toFixed(1):0,"%"]})]}),Object(o.jsxs)("div",{className:"stat-item",title:"S\u1ed1 \xf4 \u0111ang tr\u1ed1ng",children:[Object(o.jsxs)("div",{className:"stat-content",children:[Object(o.jsx)("span",{className:"dot empty-dot","aria-label":"\xd4 tr\u1ed1ng"}),Object(o.jsx)("span",{className:"stat-label",children:"EMPTY:"}),Object(o.jsx)("span",{className:"stat-value",children:s.empty})]}),Object(o.jsxs)("div",{className:"stat-percentage",children:[c?(s.empty/c*100).toFixed(1):0,"%"]})]})]}),Object(o.jsxs)("div",{className:"last-updated",title:"Th\u1eddi gian c\u1eadp nh\u1eadt th\u1ed1ng k\xea",children:["C\u1eadp nh\u1eadt: ",(t=>{if(!t)return"---";try{const e="string"===typeof t?new Date(t):t;return isNaN(e)?"---":new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).format(e)}catch(e){return"---"}})(a)]})]})};a(34);var v=t=>{var e,a,c;let{onFilterChange:n,tiers:r=[],statuses:l=["HIGH","MEDIUM","EMPTY"],filters:i,shelfStats:d}=t;const h={HIGH:{label:"K\u1ec7 \u0111\u1ea7y",color:"#22c55e"},MEDIUM:{label:"K\u1ec7 c\xf2n tr\u1ed1ng m\u1ed9t ph\u1ea7n",color:"#f59e0b"},EMPTY:{label:"K\u1ec7 tr\u1ed1ng ho\xe0n to\xe0n",color:"#ef4444"}},u=Object(s.useMemo)((()=>[...new Set(r)].sort(((t,e)=>Number(t)-Number(e)))),[r]),b=(t,e)=>{const a=Object(j.a)(Object(j.a)({},i),{},{[t]:e});n(t,e,a)},m=Object(s.useMemo)((()=>Object.values(d||{}).reduce(((t,e)=>t+(e||0)),0)),[d]);return Object(o.jsxs)("div",{className:"filter-panel",children:[Object(o.jsxs)("div",{className:"filter-header",children:[Object(o.jsx)("h3",{children:"B\u1ed9 l\u1ecdc"}),Object(o.jsx)("button",{className:"reset-button",onClick:()=>{n("reset",null,{tier:"all",status:"all"})},disabled:"all"===i.tier&&"all"===i.status,title:"\u0110\u1eb7t l\u1ea1i t\u1ea5t c\u1ea3 b\u1ed9 l\u1ecdc",children:"\u0110\u1eb7t l\u1ea1i"})]}),Object(o.jsxs)("div",{className:"filter-group",children:[Object(o.jsx)("label",{htmlFor:"tier-select",children:"Ch\u1ecdn t\u1ea7ng:"}),Object(o.jsxs)("select",{id:"tier-select",value:i.tier,onChange:t=>b("tier",t.target.value),children:[Object(o.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 c\xe1c t\u1ea7ng"}),u.map((t=>Object(o.jsxs)("option",{value:t.toString(),children:["T\u1ea7ng ",t]},t)))]})]}),Object(o.jsxs)("div",{className:"filter-group",children:[Object(o.jsx)("label",{htmlFor:"status-select",children:"Tr\u1ea1ng th\xe1i k\u1ec7:"}),Object(o.jsxs)("select",{id:"status-select",value:i.status,onChange:t=>b("status",t.target.value),style:{borderLeft:"all"!==i.status?"4px solid ".concat((null===(e=h[i.status])||void 0===e?void 0:e.color)||"transparent"):"none"},children:[Object(o.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 tr\u1ea1ng th\xe1i"}),l.map((t=>{var e;const a=(null===d||void 0===d?void 0:d[t.toLowerCase()])||0,s=m>0?Math.round(a/m*100):0;return Object(o.jsxs)("option",{value:t,className:"status-option status-".concat(t.toLowerCase()),children:[(null===(e=h[t])||void 0===e?void 0:e.label)||t," (".concat(a," - ").concat(s,"%)")]},t)}))]})]}),Object(o.jsx)("div",{className:"active-filters",children:("all"!==i.tier||"all"!==i.status)&&Object(o.jsxs)("div",{className:"filter-tags",children:[Object(o.jsx)("span",{children:"\u0110ang l\u1ecdc theo: "}),"all"!==i.tier&&Object(o.jsxs)("span",{className:"filter-tag",children:["T\u1ea7ng ",i.tier,Object(o.jsx)("button",{onClick:()=>b("tier","all"),"aria-label":"X\xf3a b\u1ed9 l\u1ecdc t\u1ea7ng",title:"X\xf3a b\u1ed9 l\u1ecdc t\u1ea7ng",children:"\xd7"})]}),"all"!==i.status&&Object(o.jsxs)("span",{className:"filter-tag",style:{borderLeft:"4px solid ".concat((null===(a=h[i.status])||void 0===a?void 0:a.color)||"transparent"),paddingLeft:"8px"},children:[(null===(c=h[i.status])||void 0===c?void 0:c.label)||i.status,Object(o.jsx)("button",{onClick:()=>b("status","all"),"aria-label":"X\xf3a b\u1ed9 l\u1ecdc tr\u1ea1ng th\xe1i",title:"X\xf3a b\u1ed9 l\u1ecdc tr\u1ea1ng th\xe1i",children:"\xd7"})]})]})})]})};var y=t=>{let{shelves:e,onShelfClick:a}=t;const[c,n]=Object(s.useState)(null),[r,l]=Object(s.useState)({high:0,medium:0,empty:0}),[i,d]=Object(s.useState)((new Date).toISOString()),[h,u]=Object(s.useState)([]),[j,b]=Object(s.useState)({tier:"all",status:"all"}),m=(t,e)=>{const a=t/e*100;return a>=80?"HIGH":a>=15?"MEDIUM":a>=0?"EMPTY":void 0};Object(s.useEffect)((()=>{const t=Array.from({length:4},((t,e)=>({shelf:e+1,tiers:Array.from({length:2},((t,e)=>[{tier:2*e+1,trays:Array.from({length:6},((t,e)=>{const a=Math.floor(101*Math.random());return{tray:e+1,status:m(a,100),capacity:100,itemCount:a,lastUpdated:(new Date).toISOString()}}))},{tier:2*e+2,trays:Array.from({length:6},((t,e)=>{const a=Math.floor(101*Math.random());return{tray:e+1,status:m(a,100),capacity:100,itemCount:a,lastUpdated:(new Date).toISOString()}}))}]))})));u(t);const e=setInterval((()=>{u((t=>{const e=JSON.parse(JSON.stringify(t)),a=Math.floor(4*Math.random()),s=Math.floor(2*Math.random()),c=Math.floor(2*Math.random()),n=Math.floor(6*Math.random()),r=e[a].tiers[s][c].trays[n],l=Math.floor(Math.random()*(r.capacity+1));return r.itemCount=l,r.status=m(l,r.capacity),r.lastUpdated=(new Date).toISOString(),e})),d((new Date).toISOString())}),3e3);return()=>clearInterval(e)}),[]),Object(s.useEffect)((()=>{const t={high:0,medium:0,empty:0};h.forEach((e=>{e.tiers.forEach((e=>{e.forEach((e=>{e.trays.forEach((e=>{t[e.status.toLowerCase()]++}))}))}))})),l(t)}),[h]);const O=(t,e)=>{const a="all"===j.tier||Number(j.tier)===t,s="all"===j.status||j.status===e;return a&&s};return Object(o.jsxs)("div",{className:"shelf-grid-wrapper",children:[Object(o.jsx)(f,{stats:r,lastUpdated:i}),Object(o.jsx)("div",{className:"shelf-grid-container",children:h.map(((t,e)=>Object(o.jsxs)("div",{className:"shelf-grid",children:[Object(o.jsxs)("h3",{children:["K\u1ec7 ",t.shelf]}),t.tiers.map(((t,a)=>Object(o.jsx)("div",{className:"tier-row-group",children:t.map((t=>{const a=(t=>t.trays.some((e=>O(t.tier,e.status))))(t);return Object(o.jsxs)("div",{className:"tier-row ".concat(a?"has-matching-items":"no-matching-items"),children:[Object(o.jsxs)("div",{className:"tier-label",children:["T\u1ea7ng ",t.tier]}),Object(o.jsx)("div",{className:"tray-container",children:t.trays.map(((a,s)=>{const c=O(t.tier,a.status);return Object(o.jsx)("div",{className:"tray-cell ".concat(c?"matching-filter":"not-matching-filter"),children:Object(o.jsx)(g,{tier:t.tier,tray:a.tray,status:a.status,onClick:()=>((t,e,a)=>{if(!e||!e.trays||!e.trays[a])return;const s=e.trays[a];n({shelf:t+1,tier:e.tier,tray:s.tray,status:s.status,capacity:s.capacity,itemCount:s.itemCount,lastUpdated:s.lastUpdated})})(e,t,s),isFiltered:c})},"tray-".concat(t.tier,"-").concat(a.tray))}))})]},"tier-".concat(t.tier))}))},"tier-group-".concat(a))))]},"shelf-".concat(t.shelf))))}),c&&Object(o.jsx)(x,{shelf:c,onClose:()=>{n(null)}})]})};const N=[{id:1,username:"admin",password:"admin123",email:"admin@example.com"},{id:2,username:"user",password:"user123",email:"user@example.com"}];N[0];let S=function(){const t=[];for(let e=1;e<=5;e++)for(let a=1;a<=3;a++)for(let s=1;s<=5;s++){const c=Math.floor(101*Math.random());let n;n=c>=80?"HIGH":c>=30?"MEDIUM":"EMPTY",t.push({shelf:e,tier:a,tray:s,status:n,capacity:c,lastUpdated:(new Date).toISOString()})}return t}();const w={fetchAll:async()=>S,getStats:async()=>{const t={high:0,medium:0,empty:0};return S.forEach((e=>{t[e.status.toLowerCase()]++})),t},subscribeToUpdates:async t=>{const e=setInterval((()=>{const e=Math.floor(Math.random()*S.length),a=S[e];a.capacity=Math.floor(101*Math.random()),a.capacity>=80?a.status="HIGH":a.capacity>=30?a.status="MEDIUM":a.status="EMPTY",a.lastUpdated=(new Date).toISOString(),t(Object(j.a)({},a))}),1e4);return()=>clearInterval(e)},updateShelf:async(t,e,a)=>{const s=S.findIndex((s=>s.tier===t&&s.tray===e&&(!a.shelf||s.shelf===a.shelf)));if(-1===s)throw new Error("Kh\xf4ng t\xecm th\u1ea5y k\u1ec7");return S[s]=Object(j.a)(Object(j.a)(Object(j.a)({},S[s]),a),{},{lastUpdated:(new Date).toISOString()}),S[s]}},M=w;var C=t=>{let{user:e,onLogout:a}=t;const[c,n]=Object(s.useState)([]),[r,l]=Object(s.useState)([]),[i,d]=Object(s.useState)(null),[h,u]=Object(s.useState)({tier:"all",status:"all"}),[b,m]=Object(s.useState)(!0),[O,p]=Object(s.useState)(null),g=(t,e)=>(Array.isArray(t)?t:[]).filter((t=>{const a="all"===e.tier||String(t.tier)===String(e.tier),s="all"===e.status||t.status&&t.status===e.status;return a&&s}));Object(s.useEffect)((()=>{let t=!0;return(async()=>{try{m(!0);const e=await M.fetchAll();if(!t)return;n(e);const a=g(e,h);l(a)}catch(e){t&&p(e.message)}finally{t&&m(!1)}})(),()=>{t=!1}}),[h]),Object(s.useEffect)((()=>{let t=null;return(async()=>{t=await M.subscribeToUpdates((t=>{n((e=>{const a=e.map((e=>e.tier===t.tier&&e.tray===t.tray?Object(j.a)(Object(j.a)({},e),t):e)),s=g(a,h);return l(s),a}))}))})(),()=>{t&&t()}}),[h]);return b?Object(o.jsx)("div",{className:"loading",role:"status",children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."}):O?Object(o.jsxs)("div",{className:"error",role:"alert",children:["L\u1ed7i: ",O]}):Object(o.jsxs)("div",{className:"dashboard",children:[Object(o.jsxs)("div",{className:"dashboard-header",children:[Object(o.jsx)("h1",{className:"dashboard-title",children:"Warehouse Dashboard"}),Object(o.jsxs)("div",{className:"user-info",children:[Object(o.jsx)("span",{className:"user-name",children:(null===e||void 0===e?void 0:e.username)||"Admin"}),Object(o.jsx)("button",{className:"logout-button",onClick:a,children:"\u0110\u0103ng xu\u1ea5t"})]})]}),"      ",Object(o.jsx)(v,{tiers:[...new Set(c.map((t=>t.tier)))].sort(),statuses:["HIGH","MEDIUM","EMPTY"],filters:h,onFilterChange:(t,e,a)=>{const s=a||Object(j.a)(Object(j.a)({},h),{},{[t]:e});u(s);const n=g(c,s);l(n)}}),Object(o.jsx)(y,{shelves:r,onShelfClick:d}),i&&Object(o.jsx)(x,{shelf:i,onClose:()=>d(null)})]})};var I=function(){return Object(o.jsx)(h,{children:Object(o.jsx)(l.a,{children:Object(o.jsxs)(i.d,{children:[Object(o.jsx)(i.b,{exact:!0,path:"/login",component:p}),Object(o.jsx)(O,{path:"/dashboard",component:C}),Object(o.jsx)(i.b,{exact:!0,path:"/",children:Object(o.jsx)(i.a,{to:"/dashboard"})})]})})})};a(35);r.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(I,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.3146d313.chunk.js.map