{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useHistory,useLocation}from'react-router-dom';import{useAuth}from'../context/AuthContext';import'./Login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const history=useHistory();const location=useLocation();const{login}=useAuth();const isMounted=useRef(true);useEffect(()=>{return()=>{isMounted.current=false;};},[]);const handleSubmit=async e=>{e.preventDefault();setError('');setIsLoading(true);try{if(!username||!password){throw new Error('Vui lòng nhập đầy đủ thông tin');}if(username==='admin'&&password==='admin123'){await login({username,role:'admin'});const{from}=location.state||{from:{pathname:\"/dashboard\"}};if(isMounted.current){history.replace(from);}}else{throw new Error('Thông tin đăng nhập không chính xác');}}catch(err){if(isMounted.current){setError(err.message);}}finally{if(isMounted.current){setIsLoading(false);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0110\\u0103ng Nh\\u1EADp H\\u1EC7 Th\\u1ED1ng\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"T\\xEAn \\u0111\\u0103ng nh\\u1EADp:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:e=>setUsername(e.target.value),disabled:isLoading,required:true,placeholder:\"Nh\\u1EADp t\\xEAn \\u0111\\u0103ng nh\\u1EADp\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"M\\u1EADt kh\\u1EA9u:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),disabled:isLoading,required:true,placeholder:\"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,children:isLoading?'Đang xử lý...':'Đăng Nhập'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-note\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"T\\xE0i kho\\u1EA3n m\\u1EB7c \\u0111\\u1ECBnh: admin / admin123\"}),/*#__PURE__*/_jsx(\"p\",{children:\"L\\u01B0u \\xFD: Ch\\u1EC9 d\\xE0nh cho m\\u1EE5c \\u0111\\xEDch ki\\u1EC3m th\\u1EED\"})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useRef","useHistory","useLocation","useAuth","jsx","_jsx","jsxs","_jsxs","Login","username","setUsername","password","setPassword","error","setError","isLoading","setIsLoading","history","location","login","isMounted","current","handleSubmit","e","preventDefault","Error","role","from","state","pathname","replace","err","message","className","children","onSubmit","htmlFor","type","id","value","onChange","target","disabled","required","placeholder"],"sources":["C:/Documents/warehouse-dashboard/src/pages/Login.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport './Login.css';\r\n\r\nconst Login = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const { login } = useAuth();\r\n    const isMounted = useRef(true);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            if (!username || !password) {\r\n                throw new Error('Vui lòng nhập đầy đủ thông tin');\r\n            }\r\n\r\n            if (username === 'admin' && password === 'admin123') {\r\n                await login({ username, role: 'admin' });\r\n                const { from } = location.state || { from: { pathname: \"/dashboard\" } };\r\n                if (isMounted.current) {\r\n                    history.replace(from);\r\n                }\r\n            } else {\r\n                throw new Error('Thông tin đăng nhập không chính xác');\r\n            }\r\n        } catch (err) {\r\n            if (isMounted.current) {\r\n                setError(err.message);\r\n            }\r\n        } finally {\r\n            if (isMounted.current) {\r\n                setIsLoading(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"login-container\">\r\n            <h2>Đăng Nhập Hệ Thống</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"username\">Tên đăng nhập:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"username\"\r\n                        value={username}\r\n                        onChange={(e) => setUsername(e.target.value)}\r\n                        disabled={isLoading}\r\n                        required\r\n                        placeholder=\"Nhập tên đăng nhập\"\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"password\">Mật khẩu:</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        disabled={isLoading}\r\n                        required\r\n                        placeholder=\"Nhập mật khẩu\"\r\n                    />\r\n                </div>\r\n                {error && <div className=\"error-message\">{error}</div>}\r\n                <button type=\"submit\" disabled={isLoading}>\r\n                    {isLoading ? 'Đang xử lý...' : 'Đăng Nhập'}\r\n                </button>\r\n            </form>\r\n            <div className=\"login-note\">\r\n                <p>Tài khoản mặc định: admin / admin123</p>\r\n                <p>Lưu ý: Chỉ dành cho mục đích kiểm thử</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}